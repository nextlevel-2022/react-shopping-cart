<p align="middle" >
  <img src="https://techcourse-storage.s3.ap-northeast-2.amazonaws.com/3e6c6f30b11d4b098b5a3e81be19ce3a" width="300">
</p>
<h2 align="middle">장바구니 - 조기문</h2>
<p align="middle">React & Redux 데스크탑 장바구니 애플리케이션</p>
</p>

# Storybook
[바로가기](https://623c9c9a55d9c0003a6be039-clmhogfiqe.chromatic.com/?path=/story/button--default)

# 웹 VSCODE
[바로가기](https://github.dev/guymoon/react-shopping-cart)

# 고민 + 시도 이야기

- [🎯 TDD 시도!](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/TDD%EC%8B%9C%EB%8F%84.md)
- [🎯 redux-saga테스트 with redux-saga-test-plan](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/redux-saga-test-plan%EC%9D%84%20%EC%9D%B4%EC%9A%A9%ED%95%9C%20redux-saga%20%ED%85%8C%EC%8A%A4%ED%8A%B8!.md)
- [🎯private을 유지하는 걸 고집해야 할까?(재사용 계획이 없는 순수 함수를 테스트하다가)](https://g1moon.notion.site/private-a0c3a2f41aff4635b3113cc181ceb5c9)
- [🎯redux toolkit  reducer 테스트하기!(너무 간편하드아~)](https://g1moon.notion.site/redux-toolkit-reducer-1d8d1696877f46589f260607cfd47766)
- [🎯상태 업데이트를 순수 함수를 통해서 vs 하나의 상태로 따로 관리해서 ? ](https://g1moon.notion.site/vs-7cadc82b1529485e851802bd0c61d3ff)
- [🎯[swith(true)-case로 가독성 확보하기?]if? else? early return? switch-case?](https://g1moon.notion.site/swith-true-case-if-else-early-return-switch-case-0927d73067e24c8fba63bd7270e5ad5f)
- [🎯리덕스 스토어 저장 전 데이터 전처리 로직을 어디까지 밀어버릴까? reducer? saga? service?](https://g1moon.notion.site/reducer-saga-service-5f182b6e58ab46e6b8b96c08534747fb)
- [🎯 products 관련 action들을 다루며 은닉화 실패..
  ](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/products%20%EA%B4%80%EB%A0%A8%20action%EB%93%A4%EC%9D%84%20%EB%8B%A4%EB%A3%A8%EB%A9%B0%20%EC%9D%80%EB%8B%89%ED%99%94%20%EC%8B%A4%ED%8C%A8...md)
- [🎯유틸 함수 분리로 선언적인 코드 작성에 대한 고민](https://g1moon.notion.site/178ac1782658404ba67a770767676e17)
- [🎯 payload 타입 지정, 설계에 대한 고민](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/payload%20%ED%83%80%EC%9E%85%20%EC%A7%80%EC%A0%95%2C%20%EC%84%A4%EA%B3%84%EC%97%90%20%EB%8C%80%ED%95%9C%20%EA%B3%A0%EB%AF%BC.md)
- [🎯 test 할 때 주입 받는 값의 위치에 대한 고민](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/test%20%ED%95%A0%20%EB%95%8C%20%EC%A3%BC%EC%9E%85%20%EB%B0%9B%EB%8A%94%20%EA%B0%92%EC%9D%98%20%EC%9C%84%EC%B9%98.md)
- [🎯 리듀서에서 state와 action 구조 분해 할당이 가독성을 높힐 수 있을지에 대한 고민](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/%EB%A6%AC%EB%93%80%EC%84%9C%EC%97%90%EC%84%9C%20state%EC%99%80%20action%20%EA%B5%AC%EC%A1%B0%20%EB%B6%84%ED%95%B4%20%ED%95%A0%EB%8B%B9%EC%9D%B4%20%EA%B0%80%EB%8F%85%EC%84%B1%EC%9D%84%20%EB%86%92%ED%9E%90%20%EC%88%98%20%EC%9E%88%EC%9D%84%EC%A7%80%3F.md)
- [🎯 어떻게하면 request에 관련된 method, url 을 효율적으로 관리할 수 있을지에 대한 고민](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/%EC%96%B4%EB%96%BB%EA%B2%8C%ED%95%98%EB%A9%B4%20request%EC%97%90%20%EA%B4%80%EB%A0%A8%EB%90%9C%20method%2C%20url%20%EC%9D%84%20%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9C%BC%EB%A1%9C%20%EA%B4%80%EB%A6%AC%ED%95%A0%20%EC%88%98%20%EC%9E%88%EC%9D%84%EC%A7%80%3F.md)
- [🎯 하나의 모델과 관련된 액션들을 하나로 관리하는 것이 좋을지? 아니면 비동기 액션은 따로 관리하는 것이 좋을지?](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/%ED%95%98%EB%82%98%EC%9D%98%20%EB%AA%A8%EB%8D%B8%EA%B3%BC%20%EA%B4%80%EB%A0%A8%EB%90%9C%20%EC%95%A1%EC%85%98%EB%93%A4%EC%9D%84%20%ED%95%98%EB%82%98%EB%A1%9C%20%EA%B4%80%EB%A6%AC%ED%95%98%EB%8A%94%20%EA%B2%83%EC%9D%B4%20%EC%A2%8B%EC%9D%84%EC%A7%80%3F%20%EC%95%84%EB%8B%88%EB%A9%B4%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EC%95%A1%EC%85%98%EC%9D%80%20%EB%94%B0%EB%A1%9C%20%EA%B4%80%EB%A6%AC%ED%95%98%EB%8A%94%20%EA%B2%83%EC%9D%B4%20%EC%A2%8B%EC%9D%84%EC%A7%80%3F.md)
- [🎯 함수라면 함수임을 알려주는 네이밍이어야 될까?](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/%ED%95%A8%EC%88%98%EB%9D%BC%EB%A9%B4%20%ED%95%A8%EC%88%98%EC%9E%84%EC%9D%84%20%EC%95%8C%EB%A0%A4%EC%A3%BC%EB%8A%94%20%EB%84%A4%EC%9D%B4%EB%B0%8D%EC%9D%B4%EC%96%B4%EC%95%BC%20%EB%90%A0%EA%B9%8C%3F.md)

# 미션 진행하며 배운 것 + 에러 + 팁 등 기록

- [🎯 TS 이것저것](https://www.notion.so/g1moon/43117d8c605b466eb7f3201ef0e1a65b#59102e64e7e84db49a76e38d870c340b)
- [🎯 test 환경에서 redux-logger 없애기](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/test%20%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%20redux-logger%20%EC%97%86%EC%95%A0%EA%B8%B0.md)
- [🎯 next.js + jest + testing-library 환경설정](https://www.notion.so/g1moon/jest-next-08c42b9b86034ccba3be8ca9f28025ec)
- [🎯 useDispatch 과 useSelector 의 typed versions!](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/useDispatch%C2%A0%EA%B3%BC%C2%A0useSelector%20%20%EC%9D%98%20typed%20versions%20!.md)
- [🎯 에러핸들링](https://github.com/guymoon/react-shopping-cart/blob/guymoon-step1/docs/%EC%97%90%EB%9F%AC%ED%95%B8%EB%93%A4%EB%A7%81.md)


# Test Coverage
File                                      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
------------------------------------------|---------|----------|---------|---------|--------------------------------------
All files                                 |   83.56 |    54.74 |   65.78 |   85.23 |
 components/@atom/BottomUpModal           |      75 |    41.66 |   66.66 |   77.77 |
  BottomUpModal.tsx                       |      75 |    41.66 |   66.66 |   77.77 | 18-23
 components/@atom/Button                  |   62.96 |    31.57 |     100 |   62.96 |
  Button.tsx                              |   62.96 |    31.57 |     100 |   62.96 | 13-27
 components/@atom/ScrollBottomObserver    |   72.22 |        0 |      50 |   72.22 |
  ScrollBottomObserver.tsx                |   72.22 |        0 |      50 |   72.22 | 11-13,16-17
 components/@atom/Spinner                 |   62.96 |    23.52 |     100 |   62.96 |
  Spinner.tsx                             |   62.96 |    23.52 |     100 |   62.96 | 13-27
 components/Carts/CartList                |   61.64 |     37.5 |   23.52 |   68.25 |
  CartList.tsx                            |   61.64 |     37.5 |   23.52 |   68.25 | 28,35,40-47,51,55,58,63-65,68-72,100
 components/Carts/CartListContainer       |     100 |       75 |     100 |     100 |
  CartListContainer.tsx                   |     100 |       75 |     100 |     100 | 11
 components/Carts/CartListItem            |      96 |       75 |   83.33 |      96 |
  CartListItem.tsx                        |      96 |       75 |   83.33 |      96 | 31
 components/ConfirmAddCartsModal          |     100 |       75 |     100 |     100 |
  ConfirmAddCartsModal.tsx                |     100 |       75 |     100 |     100 | 11
 components/GNB                           |     100 |       75 |     100 |     100 |
  GNB.tsx                                 |     100 |       75 |     100 |     100 | 12
 components/Orders/OrderList              |     100 |     87.5 |     100 |     100 |
  OrderList.tsx                           |     100 |     87.5 |     100 |     100 | 12
 components/Orders/OrderListContainer     |     100 |       75 |     100 |     100 |
  OrderListContainer.tsx                  |     100 |       75 |     100 |     100 | 11
 components/Orders/OrderListItem          |     100 |       75 |     100 |     100 |
  OrderListItem.tsx                       |     100 |       75 |     100 |     100 | 11
 components/Orders/OrderedProduct         |      88 |       75 |      40 |      88 |
  OrderedProduct.tsx                      |      88 |       75 |      40 |      88 | 25-59
 components/Products/ProductItem          |     100 |       75 |     100 |     100 |
  ProductItem.tsx                         |     100 |       75 |     100 |     100 | 12
 components/Products/ProductList          |   90.62 |    83.33 |   57.14 |   93.33 |
  ProductList.tsx                         |   90.62 |    83.33 |   57.14 |   93.33 | 24,50
 components/Products/ProductListContainer |     100 |       75 |     100 |     100 |
  ProductListContainer.tsx                |     100 |       75 |     100 |     100 | 12
 hooks/service                            |    88.6 |    83.33 |   52.94 |   95.89 |
  useCarts.ts                             |   88.88 |    83.33 |    62.5 |   94.11 | 25,49
  useOrders.ts                            |   86.95 |      100 |      40 |   95.23 | 24
  useProducts.ts                          |      90 |      100 |      50 |     100 |
 service                                  |   97.72 |      100 |   94.44 |     100 |
  cartsService.ts                         |   95.65 |      100 |    87.5 |     100 |
  ordersService.ts                        |     100 |      100 |     100 |     100 |
 service/apis                             |   56.41 |      100 |       0 |   56.41 |
  carts.ts                                |   53.84 |      100 |       0 |   53.84 | 10-19
  orders.ts                               |   53.33 |      100 |       0 |   53.33 | 11-23
  products.ts                             |   63.63 |      100 |       0 |   63.63 | 10-15
 shared/constants                         |   64.28 |      100 |   28.57 |   64.28 |
  css.ts                                  |     100 |      100 |     100 |     100 |
  url.ts                                  |   54.54 |      100 |   28.57 |   54.54 | 19-64
 shared/fixtures                          |     100 |      100 |     100 |     100 |
  cartItem.ts                             |     100 |      100 |     100 |     100 |
  carts.ts                                |     100 |      100 |     100 |     100 |
  cartsFromServer.ts                      |     100 |      100 |     100 |     100 |
  cartsReducerInitialState.ts             |     100 |      100 |     100 |     100 |
  cartsWithQuantity.ts                    |     100 |      100 |     100 |     100 |
  orderItem.ts                            |     100 |      100 |     100 |     100 |
  orders.ts                               |     100 |      100 |     100 |     100 |
  product.ts                              |     100 |      100 |     100 |     100 |
 shared/utils                             |      80 |     62.5 |   66.66 |   78.26 |
  createMockRouter.ts                     |     100 |      100 |     100 |     100 |
  fetcher.ts                              |      60 |       50 |      50 |      60 | 16-23
  redux.ts                                |   83.33 |      100 |      60 |   81.81 | 9-15
  test-utils.ts                           |     100 |      100 |     100 |     100 |
 store                                    |   96.87 |    66.66 |     100 |   96.77 |
  index.ts                                |   96.87 |    66.66 |     100 |   96.77 | 25
 store/modules                            |   96.42 |    66.66 |     100 |   96.42 |
  index.ts                                |   96.42 |    66.66 |     100 |   96.42 | 36
 store/modules/carts                      |   80.24 |       50 |   72.72 |   83.56 |
  saga.ts                                 |   82.14 |       50 |      80 |   82.14 | 46-53
  slice.ts                                |   77.55 |       50 |   70.58 |   82.92 | 55-65,89-90
  types.ts                                |     100 |      100 |     100 |     100 |
 store/modules/orders                     |   66.66 |     37.5 |   42.85 |   66.66 |
  saga.ts                                 |   47.36 |     37.5 |      50 |   47.36 | 15-36
  slice.ts                                |   78.94 |      100 |   33.33 |   78.94 | 28-32
  types.ts                                |     100 |      100 |     100 |     100 |
 store/modules/products                   |     100 |    66.66 |     100 |     100 |
  saga.ts                                 |     100 |    66.66 |     100 |     100 | 10-21
  slice.ts                                |     100 |      100 |     100 |     100 |
  types.ts                                |     100 |      100 |     100 |     100 |




## 🕋 Server 실행 방법

> **react-shopping-cart/client** 디렉토리에서 실행해주세요.

- 최초 실행 시

```shell
# npm
npm run server:first

# yarn
yarn server:first
```

- 이후 실행 시

```shell
# npm
npm run server

# yarn
yarn server
```

<br />

## 📝 API 명세

### 🌏 baseUrl

```
http://localhost:3003
```

### 🎁 상품

#### 상품 목록 조회

| method | uri       |
| ------ | --------- |
| GET    | /products |

```json
{
  "response": [
    {
      "id": 1,
      "price": 10000,
      "name": "치킨",
      "imageUrl": "http://example.com/chicken.jpg"
    },
    {
      "id": 2,
      "price": 20000,
      "name": "피자",
      "imageUrl": "http://example.com/pizza.jpg"
    }
  ]
}
```

#### 상품 추가

| method | uri       |
| ------ | --------- |
| POST   | /products |

```json
{
  "requestBody": {
    "products": {
      "price": 10000,
      "name": "치킨",
      "imageUrl": "http://example.com/chicken.jpg"
    }
  }
}
```

#### 상품 단일 조회

| method | uri            |
| ------ | -------------- |
| GET    | /products/{id} |

```json
{
  "response": {
    "id": 1,
    "price": 10000,
    "name": "치킨",
    "imageUrl": "http://example.com/chicken.jpg"
  }
}
```

#### 상품 단일 삭제

| method | uri            |
| ------ | -------------- |
| DELETE | /products/{id} |

```json
{
  "response": {}
}
```

### 🛒 장바구니

#### 장바구니 아이템 목록 조회

| method | uri    |
| ------ | ------ |
| GET    | /carts |

```json
{
  "response": {
    "id": 1,
    "product": {
      "name": "test",
      "price": 1234,
      "imageUrl": "test.com",
      "id": 1
    }
  },
{
  "id": 5,
  "product": {
    "name": "tes11111t",
    "price": 1234,
    "imageUrl": "test.com",
    "id": 10
  }
},
}
```

#### 장바구니 아이템 추가

| method | uri    |
| ------ | ------ |
| POST   | /carts |

```json
{
  "requestBody": {
    "product": {
      "id": 10,
      "name": "tes11111t",
      "price": 1234,
      "imageUrl": "test.com"
    }
  }
}
```

#### 장바구니 아이템 단일 삭제

| method | uri             |
| ------ | --------------- |
| DELETE | /carts/{cartId} |

```json
{
  "response": {}
}
```

### 🗒 주문

#### 주문 추가(주문하기)

| method | uri     |
| ------ | ------- |
| POST   | /orders |

```json
{
  "requestBody": {
    "orderDetails": [
      {
        "id": 1,
        "price": 10000,
        "name": "치킨",
        "imageUrl": "http://example.com/chicken.jpg",
        "quantity": 5
      },
      {
        "id": 2,
        "price": 20000,
        "name": "피자",
        "imageUrl": "http://example.com/pizza.jpg",
        "quantity": 3
      }
    ]
  }
}
```

#### 주문 목록(내역) 조회

| method | uri     |
| ------ | ------- |
| GET    | /orders |

```json

{
  "response": [
    {
      "id": 1,
      "orderDetails": [
        {
          "id": 1,
          "price": 10000,
          "name": "치킨",
          "imageUrl": "http://example.com/chicken.jpg",
          "quantity": 5
        },
        {
          "id": 2,
          "price": 20000,
          "name": "피자",
          "imageUrl": "http://example.com/pizza.jpg",
          "quantity": 3
        }
      ]
    },
    {
      "id": 2,
      "orderDetails": [
        {
          "id": 1,
          "price": 10000,
          "name": "치킨",
          "imageUrl": "http://example.com/chicken.jpg",
          "quantity": 5
        },
        {
          "id": 2,
          "price": 20000,
          "name": "피자",
          "imageUrl": "http://example.com/pizza.jpg",
          "quantity": 3
        }
      ]
    }
  ]
```

#### 주문 단일 조회

| method | uri          |
| ------ | ------------ |
| GET    | /orders/{id} |

```json
{
  "response": {
    "id": 1,
    "orderDetails": [
      {
        "id": 1,
        "price": 10000,
        "name": "치킨",
        "imageUrl": "http://example.com/chicken.jpg",
        "quantity": 5
      },
      {
        "id": 2,
        "price": 20000,
        "name": "피자",
        "imageUrl": "http://example.com/pizza.jpg",
        "quantity": 3
      }
    ]
  }
}
```
