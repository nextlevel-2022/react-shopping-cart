# 🔶 에러 핸들링

## 🔹  확장자 오류(ts, tsx)

```
TS2749: 'ProductList' refers to a value, but is being used as a type here. Did you mean 'typeof ProductList'?
```

- jsx 문법을 쓰고 있는데 `.ts` 다 보니 이런 에러가 뜸
- `.tsx` 로 해결

## 🔹 sagaTask 타입 문제가 생길 때

```tsx
// eslint-disable-next-line import/named
import createSagaMiddleware, { Task } from 'redux-saga';

declare module 'redux' {
  export interface Store {
    sagaTask?: Task;
  }
}

export const makeStore = () => {
  const sagaMiddleware = createSagaMiddleware();

  const store = createStore(
    persistedRootReducer,
    composeWithDevTools(applyMiddleware(sagaMiddleware, logger)),
  );

  store.sagaTask = sagaMiddleware.run(rootSaga);

  return store;
};
```

- sagaTask 타입 문제가 생길 때
- 커스텀 타입 지정

## 🔹selector 로 부터 속성 값 추출하는 부분 유틸 함수로 분리하는데 타입 문제

```tsx
export const createModelAttributeObject = (attributeSelector: any) => ({
  value: useAppSelector(attributeSelector.value),
  isLoading: useAppSelector(attributeSelector.isLoading),
  hasError: useAppSelector(attributeSelector.hasError),
  error: useAppSelector(attributeSelector.error),
});
```

```tsx
const {
    value: products,
    isLoading: isLoadingProducts,
    hasError: hasErrorProducts,
    error: errorProducts,
  } = createModelAttributeObject(productsAttributeSelector);

// 아래와 같이 사용!! 
const { products, getProducts, isLoadingProducts } = useProducts();
```

<img src="https://user-images.githubusercontent.com/44131043/155139502-cabf27fa-8087-495b-9328-ceab91503fc6.jpg" width="600px">

products의 값이 unknown....

### 해결

selector 로부터 값들을 뽑아오는 부분이 너무 반복 작업인 것 같아 utils 로 분리했다. 그런데 타입이 문제가 생겨 제네릭을 사용해 타입을 명확하게 해주고 해결했다.

```tsx
export const createModelAttributeObject = <ValueType>(
  attributeSelector: any,
): BaseRequestReducerState<ValueType> => ({
  value: useAppSelector(attributeSelector.value),
  isLoading: useAppSelector(attributeSelector.isLoading),
  hasError: useAppSelector(attributeSelector.hasError),
  error: useAppSelector(attributeSelector.error),
});
```

```tsx
const {
    value: products,
    isLoading: isLoadingProducts,
    hasError: hasErrorProducts,
    error: errorProducts,
  } = createModelAttributeObject<Product[]>(productsAttributeSelector);
```

<img src="https://user-images.githubusercontent.com/44131043/155139621-05771ab0-478c-4dfd-85c5-a6d2024177cc.jpg" width="600px">
